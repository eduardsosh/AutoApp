{% extends 'base_generic.html' %}

{% block content %}
  <h2>All Listings</h2>

  <!-- delete all listings-->
  <form method="post" action="{% url 'delete_listing' %}">
    {% csrf_token %}
    <input type="submit" value="Delete All Listings" />
</form>



{% for listing in listings %}
  <div class="listing_item">
    <a href="{{ listing.Link }}">
      <h3>{{ listing.Car.Make }} {{ listing.Car.Model }}</h3>
      <p>Price: {{ listing.Price }}</p>
      <p>Mileage: {{ listing.Mileage }}</p>


      <!-- Add images -->
      {% for image in listing.image_set.all %}
        <img src="{{ image.image.url }}" alt="Listing image">
      {% endfor %}
      <!-- Add more fields as needed -->
    </a>
    </div>
  {% empty %}
    <p>No listings found.</p>
  {% endfor %}

  {% for item in listings %}
    <!-- Display your items here. Example: -->
    <p>{{ item.field_name }}</p>
{% endfor %}

<div class="pagination">
    <span class="step-links">
        {% if listings.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ listings.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ listings.number }} of {{ listings.paginator.num_pages }}.
        </span>

        {% if listings.has_next %}
            <a href="?page={{ listings.next_page_number }}">next</a>
            <a href="?page={{ listings.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
</div>


{% endblock %}
